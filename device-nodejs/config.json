{"files":[{"location":"test.js","file":"dmFyIGRhdGEgPSBbXQ0KbW9kdWxlLmV4cG9ydHMgPSB7DQogIHBvbGw6IGZ1bmN0aW9uIChhcmdzKSB7DQogICAgLy8gVE9ETzogW3hdIGNvbGxhdGUgYWxsIHRoZSByZWFkaW5ncyBhbmQgcmV0dWVuIHRoZW0gb24gdGhlIGFnZ3JlZ2F0b3IgY2hhbm5lbA0KICAgIC8vIFRPRE86IFt4XSBjb21wdXRlIG1pbiwgbWF4LCBtZWFuIGFuZCBjb3VudA0KICAgIC8vIE5PVEU6IG5lZWQgdG8gaW1wbGVtZW50IGEgbGlnaHQgd29ya2Zsb3cgaGVyZSwgdG8gZW5zdXJlIHRoYXQgc2Vuc29yIHJlYWRpbmdzIGFyZSBzeW5jZWQgdXAgd2l0aCB0aGUgYWdncmVnYXRvcg0KICAgIHZhciByZWFkaW5ncyA9IFtdDQogICAgdmFyIG1pbiA9IDANCiAgICB2YXIgbWF4ID0gMA0KICAgIHZhciBtZWFuID0gMA0KICAgIHZhciBjb3VudCA9IDANCiAgICB2YXIgc2Vuc29yUmVhZGluZ3MgPSBbXQ0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy50b3BpY3MubGVuZ3RoOyBpKyspIHsNCiAgICAgIGlmIChkYXRhW2FyZ3MudG9waWNzW2ldXSkgew0KICAgICAgICBzZW5zb3JSZWFkaW5ncyA9IGRhdGFbYXJncy50b3BpY3NbaV1dDQogICAgICAgIHJlYWRpbmdzLnB1c2goc2Vuc29yUmVhZGluZ3MpDQogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2Vuc29yUmVhZGluZ3MubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsNCiAgICAgICAgICAgIG1pbiA9IG1heCA9IG1lYW4gPSBzZW5zb3JSZWFkaW5nc1tqXS5yZWFkaW5nDQogICAgICAgICAgfQ0KICAgICAgICAgIG1pbiA9IE1hdGgubWluKHNlbnNvclJlYWRpbmdzW2pdLnJlYWRpbmcsIG1pbikNCiAgICAgICAgICBtYXggPSBNYXRoLm1heChzZW5zb3JSZWFkaW5nc1tqXS5yZWFkaW5nLCBtYXgpDQogICAgICAgICAgbWVhbiA9ICgoY291bnQgKiBtZWFuKSArIHNlbnNvclJlYWRpbmdzW2pdLnJlYWRpbmcpIC8gKGNvdW50ICsgMSkNCiAgICAgICAgICBjb3VudCsrDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgdmFyIHJlc3AgPSBKU09OLnN0cmluZ2lmeSh7DQogICAgICBkYXRlOiBEYXRlLm5vdygpLA0KICAgICAgbWluOiBtaW4sDQogICAgICBtYXg6IG1heCwNCiAgICAgIGNvdW50OiBjb3VudCwNCiAgICAgIG1lYW46IG1lYW4sDQogICAgICByZWFkaW5nczogcmVhZGluZ3MNCiAgICB9KQ0KICAgIC8vIGNsZWFyIGRhdGEgZm9yIHRoaXMgYWdncmVnYXRvcg0KICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy50b3BpY3MubGVuZ3RoOyBpKyspIHsNCiAgICAgIGRhdGFbYXJncy50b3BpY3NbaV1dID0gW10NCiAgICB9DQogICAgcmV0dXJuIHJlc3ANCiAgfSwNCiAgbWVzc2FnZTogZnVuY3Rpb24gKGFyZ3MpIHsNCiAgICBjb25zb2xlLmxvZyhhcmdzLmNoYW5uZWwpDQogICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHsNCiAgICAgICdhZ2dyZWdhdGVzJzogZ2V0QWdncmVnYXRlKGFyZ3MpLA0KICAgICAgJ3JlYWRpbmdzJzogZ2V0UmVhZGluZ3MoYXJncykNCiAgICB9KQ0KICB9LA0KICBwYXJzZTogZnVuY3Rpb24gKG1lc3NhZ2UsIHNlbnNvcikgew0KICAgIGNvbnNvbGUubG9nKHNlbnNvcikNCiAgICBjb25zb2xlLmxvZyhtZXNzYWdlLnRvU3RyaW5nKCkpDQogIH0sDQogIGhhbmRsZU1lc3NhZ2U6IGZ1bmN0aW9uICh0b3BpYywgbWVzc2FnZSkgew0KICAgIGlmICghZGF0YVt0b3BpY10pIHsNCiAgICAgIGRhdGFbdG9waWNdID0gW10NCiAgICB9DQogICAgZGF0YVt0b3BpY10ucHVzaCh7DQogICAgICByZWFkaW5nOiBtZXNzYWdlLnJlYWRpbmcsDQogICAgICBzZW5zb3JfaWQ6IG1lc3NhZ2Uuc2Vuc29yX2lkLA0KICAgICAgZGF0ZTogbWVzc2FnZS5kYXRlDQoNCiAgICB9KQ0KICB9DQoNCn0NCg0KZnVuY3Rpb24gZ2V0UmVhZGluZ3MgKGFnZykgew0KICByZXR1cm4gMA0KfQ0KZnVuY3Rpb24gZ2V0QWdncmVnYXRlIChhZ2cpIHsNCiAgcmV0dXJuIDANCn0NCg=="}],"roles":["THING"],"subscriptions":[],"isTing":false,"isAggregator":true,"isBroker":true,"sensors":[{"id":"sensor1","channel":"sensor1","sensor_id":"597fb1dd3d7bab07cc445bf1","description":"temperature sensor #17, floor 1","handler":"thing/sensors/rand_sensor","poll":60000,"config":{"minValue":14,"range":17}},{"id":"sensor123","channel":"sens_12","sensor_id":"597fb19ec491901c4040098e","description":"temperature sensor #7, floor 1","handler":"thing/sensors/rand_sensor","poll":60000,"config":{"minValue":14,"range":17}},{"id":"sensor999","channel":"sens_9","sensor_id":"597fb19ec491901c40400985","description":"temperature sensor #8, floor 1","handler":"thing/sensors/rand_sensor","poll":60000,"config":{"minValue":14,"range":17}},{"id":"sensorXYZ","channel":"sens_x","sensor_id":"597fb1e03d7bab07cc445bf2","description":"temperature sensor #12, floor 1","handler":"thing/sensors/rand_sensor","poll":60000,"config":{"minValue":14,"range":17}},{"id":"sensor2","channel":"sens_2","sensor_id":"597fb1f6b3c4f917ec37a93c","description":"temperature sensor #2, floor 1","handler":"thing/sensors/rand_sensor","poll":8000,"config":{"minValue":14,"range":17}},{"id":"sensor_CO2_001","channel":"sens_c02","sensor_id":"597fb1f6b3c4f917ec37a93q","description":"measure air quality (CO2 level) - 0 perfect air quality, 10 terrible","handler":"thing/sensors/rand_sensor","poll":6000,"config":{"some_random_config_item":"This could be a GPIO pin number, memory address, device id etc","minValue":0,"range":10}}],"controllers":[{"id":"controller1","controller_channel":"controller12345","description":"lighting controller, first floor","handler":"thing/controllers/demo_controller","broker":"demoBroker"},{"id":"controller2","controller_channel":"controllerX","description":"lighting controller, second floor","handler":"thing/controllers/demo_controller","broker":"secondBroker"}],"aggregators":[{"agg_id":"aggregator1","channel":"agg_chan1","topics":["sens_c02","sens_2"],"description":"First Floor Lighting Aggregator","handler":"aggregators/agg1","poll":5000}],"thing":{"sensors":[{"id":"sensor1","channel":"sensor1","sensor_id":"597fb1dd3d7bab07cc445bf1","description":"temperature sensor #17, floor 1","handler":"thing/sensors/rand_sensor","poll":60000,"config":{"minValue":14,"range":17}},{"id":"sensor123","channel":"sens_12","sensor_id":"597fb19ec491901c4040098e","description":"temperature sensor #7, floor 1","handler":"thing/sensors/rand_sensor","poll":60000,"config":{"minValue":14,"range":17}},{"id":"sensor999","channel":"sens_9","sensor_id":"597fb19ec491901c40400985","description":"temperature sensor #8, floor 1","handler":"thing/sensors/rand_sensor","poll":60000,"config":{"minValue":14,"range":17}},{"id":"sensorXYZ","channel":"sens_x","sensor_id":"597fb1e03d7bab07cc445bf2","description":"temperature sensor #12, floor 1","handler":"thing/sensors/rand_sensor","poll":60000,"config":{"minValue":14,"range":17}},{"id":"sensor2","channel":"sens_2","sensor_id":"597fb1f6b3c4f917ec37a93c","description":"temperature sensor #2, floor 1","handler":"thing/sensors/rand_sensor","poll":8000,"config":{"minValue":14,"range":17}},{"id":"sensor_CO2_001","channel":"sens_c02","sensor_id":"597fb1f6b3c4f917ec37a93q","description":"measure air quality (CO2 level) - 0 perfect air quality, 10 terrible","handler":"thing/sensors/rand_sensor","poll":6000,"config":{"some_random_config_item":"This could be a GPIO pin number, memory address, device id etc","minValue":0,"range":10}}],"controllers":[{"id":"controller1","controller_channel":"controller12345","description":"lighting controller, first floor","handler":"thing/controllers/demo_controller","broker":"demoBroker"},{"id":"controller2","controller_channel":"controllerX","description":"lighting controller, second floor","handler":"thing/controllers/demo_controller","broker":"secondBroker"}]},"brokers":[{"broker":"demoBroker","channel":"brok_level1","devices":["controller1"],"handler":"brokers/demo_broker"},{"broker":"secondBroker","channel":"broker_br2","devices":["device15","device1","device_xyx"],"handler":"brokers/demo_broker"}],"device_id":"device10","isThing":true}
